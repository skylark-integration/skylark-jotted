{"version":3,"sources":["plugins/ace.js"],"names":["define","util","[object Object]","jotted","options","i","this","editor","extend","window","ace","$editors","$container","querySelectorAll","length","$textarea","querySelector","type","data","file","$aceContainer","document","createElement","appendChild","edit","editorOptions","getSession","setMode","getMode","setOptions","$blockScrolling","Infinity","on","change","bind","params","trigger","callback","aceEditor","setValue","content","editorChange","getValue"],"mappings":";;;;;;;AAAAA,QAAQ,WAAY,SAAUC,GAC1B,aACA,aACIC,YAAYC,EAAQC,GAChB,IACIC,EAIJ,GAHAC,KAAKC,UACLD,KAAKH,OAASA,EACdC,EAAUH,EAAKO,OAAOJ,WACI,IAAfK,OAAOC,IAAlB,CAGA,IAAIC,EAAWR,EAAOS,WAAWC,iBAAiB,kBAClD,IAAKR,EAAI,EAAGA,EAAIM,EAASG,OAAQT,IAAK,CAClC,IAAIU,EAAYJ,EAASN,GAAGW,cAAc,YACtCC,EAAOhB,EAAKiB,KAAKH,EAAW,eAC5BI,EAAOlB,EAAKiB,KAAKH,EAAW,eAC5BK,EAAgBC,SAASC,cAAc,OAC3CX,EAASN,GAAGkB,YAAYH,GACxBd,KAAKC,OAAOU,GAAQR,OAAOC,IAAIc,KAAKJ,GACpC,IAAIb,EAASD,KAAKC,OAAOU,GACrBQ,EAAgBxB,EAAKO,OAAOJ,GAChCG,EAAOmB,aAAaC,QAAQ,YAAc1B,EAAK2B,QAAQX,EAAME,IAC7DZ,EAAOmB,aAAaG,WAAWJ,GAC/BlB,EAAOuB,gBAAkBC,EAAAA,EAE7B5B,EAAO6B,GAAG,SAAU1B,KAAK2B,OAAOC,KAAK5B,MAtBtB,IAwBnBJ,aAAaiC,GACT,MAAO,KACH7B,KAAKH,OAAOiC,QAAQ,SAAUD,IAGtCjC,OAAOiC,EAAQE,GACX,IAAI9B,EAASD,KAAKC,OAAO4B,EAAOlB,MAC3BkB,EAAOG,YACR/B,EAAOmB,aAAaa,SAASJ,EAAOK,SACpCL,EAAOG,UAAY/B,EACnBA,EAAOyB,GAAG,SAAU1B,KAAKmC,aAAaN,KAE1CA,EAAOK,QAAUjC,EAAOmC,WACxBL,EAAS,KAAMF","file":"../../plugins/ace.js","sourcesContent":["define(['../util'], function (util) {\n    'use strict';\n    return class PluginAce {\n        constructor(jotted, options) {\n            var priority = 1;\n            var i;\n            this.editor = {};\n            this.jotted = jotted;\n            options = util.extend(options, {});\n            if (typeof window.ace === 'undefined') {\n                return;\n            }\n            var $editors = jotted.$container.querySelectorAll('.jotted-editor');\n            for (i = 0; i < $editors.length; i++) {\n                let $textarea = $editors[i].querySelector('textarea');\n                let type = util.data($textarea, 'jotted-type');\n                let file = util.data($textarea, 'jotted-file');\n                let $aceContainer = document.createElement('div');\n                $editors[i].appendChild($aceContainer);\n                this.editor[type] = window.ace.edit($aceContainer);\n                let editor = this.editor[type];\n                let editorOptions = util.extend(options);\n                editor.getSession().setMode('ace/mode/' + util.getMode(type, file));\n                editor.getSession().setOptions(editorOptions);\n                editor.$blockScrolling = Infinity;\n            }\n            jotted.on('change', this.change.bind(this), priority);\n        }\n        editorChange(params) {\n            return () => {\n                this.jotted.trigger('change', params);\n            };\n        }\n        change(params, callback) {\n            var editor = this.editor[params.type];\n            if (!params.aceEditor) {\n                editor.getSession().setValue(params.content);\n                params.aceEditor = editor;\n                editor.on('change', this.editorChange(params));\n            }\n            params.content = editor.getValue();\n            callback(null, params);\n        }\n    };\n});"]}